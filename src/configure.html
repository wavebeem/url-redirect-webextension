<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>URL Switcher - Configure</title>
    <link rel="stylesheet" href="../lib/tachyons-4.10.0.min.css" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body class="helvetica pa2 lh-copy near-black bg-near-white f5">
    <header class="center mw7 ph2">
      <h1 class="mv0 lh-title">URL Switcher</h1>
      <p class="mv0">
        &copy; 2019
        <a href="https://mockbrian.com" class="black hover-gray">Brian Mock</a>
      </p>
      <p>
        Note that the browser cache can interfere with URL Switcher. You can
        bypass the browser cache via a setting in the DevTools, as well as
        holding Shift while refreshing the page.
      </p>
    </header>
    <hr class="b--black-10" />
    <main id="app" class="center mw7 ph2">
      <section>
        <h2 v-bind:class="css.h2">Remove CSP (Content-Security-Policy)</h2>
        <p>
          Examples:
          <code>https://google.com</code> This will disable CSP on google.com,
          but not mail.google.com, and only when using HTTPS, not plain HTTP.
        </p>
        <table v-bind:class="css.table">
          <thead>
            <tr v-bind:class="css.row">
              <th v-bind:class="css.th">Origin Pattern</th>
              <th v-bind:class="css.th">Enabled</th>
              <th v-bind:class="css.th">Remove</th>
            </tr>
          </thead>
          <tbody>
              <tr v-for="(obj, index) in config.removeCSP" v-bind:class="css.row">
                <td>
                  <!-- <label v-bind:for="'removeCSP-' + index" v-bind:class="css.label"
                    >CSP Origin</label
                  > -->
                  <input
                    aria-label="Origin Pattern"
                    v-bind:id="'removeCSP-' + index"
                    v-bind:class="css.input"
                    v-model="obj.originPattern"
                  />
                </td><td>
                  <!-- <label
                    v-bind:for="'remove-CSP-enabled-' + index"
                    v-bind:class="css.checkboxLabel"
                  >Enabled</label> -->
                  <input
                    aria-label="Enabled"
                    v-bind:id="'remove-CSP-enabled-' + index"
                    v-bind:class="css.checkbox"
                    type="checkbox"
                    v-model="obj.enabled"
                  />
                </td><td>
                  <button
                    aria-label="Remove"
                    v-bind:class="css.remove"
                    type="button"
                    v-on:click="removeCSPByIndex(index)"
                    title="Remove CSP rule"
                  >
                    &times;
                  </button>
                </td><td>
              </td>
              </tr>
          </tbody>
        </table>
        <button v-bind:class="css.add" type="button" v-on:click="addCSP()">
            Add CSP rule
          </button>

      </section>
      <hr class="b--black-10" />
      <section>
        <h2 v-bind:class="css.h2">Redirect URLs</h2>
        <p>
          Pattern matching is allowed for URLs. You can use <code>*</code> to
          match a URL chunk (a protocol, subdomain, section of a path, or a
          query string key or value).
        </p>
        <p>
          You can also use <code>{name}</code> to capture the value from the
          pattern matched. You can use this value in the "To" field by using the
          same syntax. You can use as many names as you want.
        </p>
        <div v-for="(obj, index) in config.redirect" v-bind:class="css.card">
          <div class="flex-auto">
          <label v-bind:for="'redirect-from-' + index" v-bind:class="css.label"
            >Redirect from pattern</label
          >
          <input
            v-bind:id="'redirect-from-' + index"
            v-bind:class="css.input"
            v-model="obj.fromPattern"
          />
          </div>
          <div class="flex-auto">
          <label v-bind:for="'redirect-to-' + index" v-bind:class="css.label"
            >Redirect to pattern</label
          >
          <input
            v-bind:id="'redirect-to-' + index"
            v-bind:class="css.input"
            v-model="obj.toPattern"
          />
        </div>
        <input type="checkbox" v-model="obj.enabled" v-bind:class="css.checkbox" />
            <button
            aria-label="Remove redirect rule"
              v-bind:class="css.remove"
              type="button"
              v-on:click="removeRedirectByIndex(index)"
            >
              &times;
            </button>
          </div>
        </div>
        <button v-bind:class="css.add" type="button" v-on:click="addRedirect()">
          Add Redirect Rule
        </button>
        <pre>{{ configJSON }}</pre>
      </section>
    </main>
    <script src="../lib/webextension-polyfill-0.5.0.min.js"></script>
    <script type="module" src="configure.js"></script>
  </body>
</html>
